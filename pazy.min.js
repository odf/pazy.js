(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO=function(a,b){return function(){return a.apply(b,arguments)}},bP=Array.prototype.slice,bQ=Object.prototype.hasOwnProperty,bR=function(a,b){function d(){this.constructor=a}for(var c in b)bQ.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype;return a},bS=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1};Array.prototype.equals||(Array.prototype.equals=function(a){var b,c;if(this.length!==a.length)return!1;for(b=0,c=this.length;0<=c?b<c:b>c;0<=c?b++:b--)if(!_(this[b],a[b]))return!1;return!0}),_=function(a,b){return typeof (a!=null?a.equals:void 0)=="function"?a.equals(b):typeof (b!=null?b.equals:void 0)=="function"?b.equals(a):a===b},bm=function(a){return typeof a=="number"&&4294967296>a&&a>=0&&a%1===0},bc=function(a){var b,c,d,e;if(typeof (a!=null?a.hashCode:void 0)=="function")return a.hashCode();if(bm(a))return a;c=""+a,d=0;for(b=0,e=c.length;0<=e?b<e:b>e;0<=e?b++:b--)d=d*37+c.charCodeAt(b)&4294967295;return d},typeof exports!="undefined"&&exports!==null?exports:exports=(bv=this.pazy)!=null?bv:this.pazy={},exports.equal=_,exports.hashCode=bc,typeof exports!="undefined"&&exports!==null?exports:exports=(bG=this.pazy)!=null?bG:this.pazy={},exports.suspend=function(a){var b;b=function(){var c;c=a();return(b=function(){return c})()};return function(){return b()}},exports.bounce=function(a){while(typeof a=="function")a=a();return a},exports.scope=function(a,b){return b.apply(null,a)},typeof require!="undefined"?(require.paths.unshift(__dirname),_=require("core_extensions").equal,O=require("functional").bounce):(bH=this.pazy,_=bH.equal,O=bH.bounce),B=function(){function a(a,b){this.first=a,this.rest=b}return a}(),bp=function(a,b){return b>=a.length||a[b]!==void 0?bb(a,b):function(){return bp(a,b+1)}},bb=function(a,b){return b>=a.length?null:a[b]===void 0?O(bp(a,b)):bn.conj(a[b],function(){return bb(a,b+1)})},bn=function(a){if(a==null)return null;if(a.constructor===B)return a;if(typeof a.toSeq=="function")return a.toSeq();if(typeof a.length=="number")return bb(a,0);if(typeof a.first=="function"&&typeof a.rest=="function")return a;throw new Error("cannot make a sequence from "+a)},bn.conj=function(a,b,c){var d;if(b==null)return new B(function(){return a},function(){return null});if(c==="forced"){d=b();return new B(function(){return a},function(){return d})}return new B(function(){return a},function(){var a;a=b();return(this.rest=function(){return a})()})},bn.from=function(a){return bn.conj(a,bO(function(){return bn.from(a+1)},this))},bn.range=function(a,b){return bn.take__(bn.from(a),b-a+1)},bn.constant=function(a){return bn.conj(a,bO(function(){return bn.constant(a)},this))},bn.memo=be=function(a,b){bn[a]=function(a){return b.call(bn,bn(a))},bn[""+a+"__"]=function(a){return b.call(bn,a)};return B.prototype[a]=function(){var c;c=b.call(bn,this);return(this[a]=function(){return c})()}},bn.method=bf=function(a,b){bn[a]=function(){var a,c;c=arguments[0],a=2<=arguments.length?bP.call(arguments,1):[];return b.call.apply(b,[bn,bn(c)].concat(bP.call(a)))},bn[""+a+"__"]=function(){var a,c;c=arguments[0],a=2<=arguments.length?bP.call(arguments,1):[];return b.call.apply(b,[bn,c].concat(bP.call(a)))};return B.prototype[a]=function(){var a;a=1<=arguments.length?bP.call(arguments,0):[];return b.call.apply(b,[bn,this].concat(bP.call(a)))}},bn.combinator=U=function(a,b){var c;c=""+a+"__",bn[c]=function(a){return b.call(bn,a)},bn[a]=function(){var a;a=1<=arguments.length?bP.call(arguments,0):[];return bn[c](bn.map(a,bn))};return B.prototype[a]=function(){var b;b=1<=arguments.length?bP.call(arguments,0):[];return bn[a].apply(bn,[this].concat(bP.call(b)))}},bf("empty",function(a){return a==null}),be("size",function(a){var b;b=function(a,c){return a?function(){return b(a.rest(),c+1)}:c};return O(b(a,0))}),be("last",function(a){var b;b=function(a){return a.rest()?function(){return b(a.rest())}:a.first()};if(a)return O(b(a))}),bf("take",function(a,b){return a&&b>0?this.conj(a.first(),bO(function(){return this.take__(a.rest(),b-1)},this)):null}),bf("takeWhile",function(a,b){return a&&b(a.first())?this.conj(a.first(),bO(function(){return this.takeWhile__(a.rest(),b)},this)):null}),bf("drop",function(a,b){var c;c=function(a,b){return a&&b>0?function(){return c(a.rest(),b-1)}:a};return a?O(c(a,b)):null}),bf("dropWhile",function(a,b){var c;c=function(a){return a&&b(a.first())?function(){return c(a.rest())}:a};return a?O(c(a)):null}),bf("get",function(a,b){var c;if(b>=0)return(c=this.drop__(a,b))!=null?c.first():void 0}),bf("select",function(a,b){return a&&b(a.first())?this.conj(a.first(),bO(function(){return this.select__(a.rest(),b)},this)):(a!=null?a.rest():void 0)?this.select__(this.dropWhile__(a.rest(),function(a){return!b(a)}),b):null}),bf("find",function(a,b){var c;return(c=this.select__(a,b))!=null?c.first():void 0}),bf("forall",function(a,b){return!this.select__(a,function(a){return!b(a)})}),bf("map",function(a,b){return a?this.conj(b(a.first()),bO(function(){return this.map__(a.rest(),b)},this)):null}),bf("accumulate",function(a,b,c){var d;if(a){d=c(b,a.first());return this.conj(d,bO(function(){return this.accumulate__(a.rest(),d,c)},this))}return null}),bf("sums",function(a){return this.accumulate__(a,0,function(a,b){return a+b})}),bf("products",function(a){return this.accumulate__(a,1,function(a,b){return a*b})}),bf("reduce",function(a,b,c){var d;d=function(a,b){return a?function(){return d(a.rest(),c(b,a.first()))}:b};return O(d(a,b))}),bf("sum",function(a){return this.reduce__(a,0,function(a,b){return a+b})}),bf("product",function(a){return this.reduce__(a,1,function(a,b){return a*b})}),bf("fold",function(a,b){return this.reduce__(a!=null?a.rest():void 0,a!=null?a.first():void 0,b)}),bf("max",function(a){return this.fold__(a,function(a,b){return b>a?b:a})}),bf("min",function(a){return this.fold__(a,function(a,b){return b<a?b:a})}),U("zip",function(a){var b;b=a!=null?a.map(function(a){return a!=null?a.first():null}):void 0;return bn.find(b,function(a){return a!=null})!=null?bn.conj(b,function(){return bn.zip__(bn.map(a,function(a){return a!=null?a.rest():void 0}))}):null}),bn.combine=function(){var a,b,c;b=arguments[0],a=2<=arguments.length?bP.call(arguments,1):[];return(c=bn.zip.apply(bn,a))!=null?c.map(function(a){return bn.fold(a,b)}):void 0},B.prototype.combine=function(){var a,b;b=arguments[0],a=2<=arguments.length?bP.call(arguments,1):[];return bn.combine.apply(bn,[b,this].concat(bP.call(a)))},bf("add",function(){var a,b;b=arguments[0],a=2<=arguments.length?bP.call(arguments,1):[];return bn.combine.apply(bn,[function(a,b){return a+b},b].concat(bP.call(a)))}),bf("sub",function(){var a,b;b=arguments[0],a=2<=arguments.length?bP.call(arguments,1):[];return bn.combine.apply(bn,[function(a,b){return a-b},b].concat(bP.call(a)))}),bf("mul",function(){var a,b;b=arguments[0],a=2<=arguments.length?bP.call(arguments,1):[];return bn.combine.apply(bn,[function(a,b){return a*b},b].concat(bP.call(a)))}),bf("div",function(){var a,b;b=arguments[0],a=2<=arguments.length?bP.call(arguments,1):[];return bn.combine.apply(bn,[function(a,b){return a/b},b].concat(bP.call(a)))}),bf("equals",function(){var a,b;b=arguments[0],a=2<=arguments.length?bP.call(arguments,1):[];return this.forall__(bn.zip.apply(bn,[b].concat(bP.call(a))),function(a){var b;b=a!=null?a.first():void 0;return bn.forall__(a!=null?a.rest():void 0,function(a){return _(b,a)})})}),bf("lazyConcat",function(a,b){return a?this.conj(a.first(),bO(function(){return this.lazyConcat(a.rest(),b)},this)):bn(b())}),U("concat",function(a){return a?this.lazyConcat(a.first(),bO(function(){return this.concat__(a.rest())},this)):null}),U("interleave",function(a){var b,c;c=a!=null?a.select(function(a){return a!=null}):void 0;if(c!=null){b=c.map(function(a){return a.first()});return this.lazyConcat(b,bO(function(){return this.interleave__(c.map(function(a){return a.rest()}))},this))}return null}),bf("flatten",function(a){return a&&bn(a.first())?this.lazyConcat(bn(a.first()),bO(function(){return this.flatten__(a.rest())},this)):(a!=null?a.rest():void 0)?this.flatten__(this.dropWhile__(a.rest(),function(a){return!bn(a)})):null}),bf("flatMap",function(a,b){return this.flatten__(this.map__(a,b))}),U("cartesian",function(a){return a?a.rest()?this.flatMap__(a.first(),bO(function(b){var c;return(c=this.cartesian__(a.rest()))!=null?c.map(bO(function(a){return this.conj(b,function(){return a})},this)):void 0},this)):a.first().map(bn.conj):null}),Q=function(a,b,c){var d,e;if(c){d=bn.conj(c.first(),function(){return b}),e=a.zip(d).takeWhile(function(a){return a!=null?a.get(1):void 0}).flatMap(function(a){var b;b=a.first();return a.get(1).map(function(a){return bn.conj(b,function(){return a})})});return bn.conj(e,function(){return Q(a,d,c.rest())})}return null},R=function(a){return a?a.rest()?Q(a.first(),null,R(a.rest())):a.first().map(function(a){return bn.conj(bn.conj(a))}):null},U("cantor",function(a){var b;return(b=R(a))!=null?b.flatten():void 0}),bf("each",function(a,b){var c;c=function(a){if(a){b(a.first());return function(){return c(a.rest())}}};return O(c(a))}),bf("reverse",function(a){var b;b=bO(function(a,c){return c?bO(function(){return b(this.conj(c.first(),function(){return a}),c.rest())},this):a},this);return O(b(null,a))}),bf("forced",function(a){return a?this.conj(a.first(),bO(function(){return this.forced__(a.rest())},this),"forced"):null}),bf("into",function(a,b){var c,d;if(b==null)return a;if(typeof b.plus=="function")return this.reduce__(a,b,function(a,b){return a.plus(b)});if(typeof b.length=="number"){c=function(){var a,c,e;e=[];for(a=0,c=b.length;a<c;a++)d=b[a],e.push(d);return e}(),this.each__(a,function(a){return c.push(a)});return c}throw new Error("cannot inject into #{target}")}),bf("join",function(a,b){return this.into__(a,[]).join(b)}),bf("toString",function(a,b){var c,d,e;b==null&&(b=10),e=b>0?[this.take__(a,b),this.get__(a,b)!=null]:[a,!1],d=e[0],c=e[1];return"("+this.join__(d,", ")+(c?", ...)":")")}),typeof exports!="undefined"&&exports!==null?exports:exports=(bI=this.pazy)!=null?bI:this.pazy={},exports.seq=bn,typeof module!="undefined"&&module!==null&&!module.parent&&(bl=bn.from(1),console.log(""+bl.cantor(bl,bl).take(10))),typeof require!="undefined"?(require.paths.unshift(__dirname),bJ=require("core_extensions"),_=bJ.equal,bc=bJ.hashCode,bn=require("sequence").seq):(bK=this.pazy,_=bK.equal,bc=bK.hashCode,bn=bK.seq),bu={arrayWith:function(a,b,c){var d,e,f;f=[];for(d=0,e=a.length;0<=e?d<e:d>e;0<=e?d++:d--)f.push(d===b?c:a[d]);return f},arrayWithInsertion:function(a,b,c){var d,e,f;f=[];for(d=0,e=a.length;0<=e?d<=e:d>=e;0<=e?d++:d--)f.push(d<b?a[d]:d>b?a[d-1]:c);return f},arrayWithout:function(a,b){var c,d,e;e=[];for(c=0,d=a.length;0<=d?c<d:c>d;0<=d?c++:c--)c!==b&&e.push(a[c]);return e},isKey:function(a){return typeof a=="number"&&4294967296>a&&a>=0&&a%1===0},mask:function(a,b){return a>>27-b&31},bitCount:function(a){a-=a>>1&1431655765,a=(a&858993459)+(a>>2&858993459),a=(a&252645135)+(a>>4&252645135),a+=a>>8;return a+(a>>16)&63},indexForBit:function(a,b){return bu.bitCount(a&b-1)},bitPosAndIndex:function(a,b,c){var d;d=1<<bu.mask(b,c);return[d,bu.indexForBit(a,d)]}},j={size:0,get:function(a,b,c){return},elements:null,plus:function(a,b,c){return c},minus:function(a,b,c){return this},toString:function(){return"EmptyNode"}},c=function(){function b(a,b,c){var d;d=arguments.length===0?[0,[],0]:[a,b,c],this.bitmap=d[0],this.progeny=d[1],this.size=d[2],this.elements=bn.flatMap(this.progeny,function(a){return a!=null?a.elements:void 0})}b.prototype.get=function(a,b,c){var d,e,f;f=bu.bitPosAndIndex(this.bitmap,b,a),d=f[0],e=f[1];if((this.bitmap&d)!==0)return this.progeny[e].get(a+5,b,c)},b.prototype.plus=function(c,d,e){var f,g,h,i,j,k,l,m,n,o,p;p=bu.bitPosAndIndex(this.bitmap,d,c),h=p[0],i=p[1];if((this.bitmap&h)===0){k=bu.bitCount(this.bitmap);if(k<8){l=bu.arrayWithInsertion(this.progeny,i,e);return new b(this.bitmap|h,l,this.size+1)}n=function(){var a;a=[];for(j=0;j<=31;j++)g=1<<j,a.push((this.bitmap&g)!==0?this.progeny[bu.indexForBit(this.bitmap,g)]:void 0);return a}.call(this);return new a(n,bu.mask(d,c),e,this.size+1)}o=this.progeny[i],m=o.plus(c+5,d,e);if(this.bitmap===1<<i)return new y(i,m);f=bu.arrayWith(this.progeny,i,m);return new b(this.bitmap,f,this.size+m.size-o.size)},b.prototype.minus=function(a,c,d){var e,f,g,h,i,j,k,l,m;m=bu.bitPosAndIndex(this.bitmap,c,a),e=m[0],g=m[1],l=this.progeny[g],k=l.minus(a+5,c,d),k!=null?(i=this.bitmap,j=this.size+k.size-l.size,h=bu.arrayWith(this.progeny,g,k)):(i=this.bitmap^e,j=this.size-1,h=bu.arrayWithout(this.progeny,g)),f=bu.bitCount(i);if(f===0)return null;if(f===1){k=h[0];return k.progeny!=null?new y(bu.bitCount(i-1),k):k}return new b(i,h,j)},b.prototype.toString=function(a){var b,c,d,e;a==null&&(a=""),e=a+" ",c=[];for(d=0;d<=31;d++)b=1<<d,(this.bitmap&b)!==0&&c.push(this.progeny[bu.indexForBit(this.bitmap,b)].toString(e));if(c.length===1)return"{"+c[0]+"}";c.unshift("");return"{"+c.join("\n"+e)+"}"};return b}(),y=function(){function a(a,b){this.child_index=a,this.progeny=b,this.size=this.progeny.size,this.elements=this.progeny.elements}a.prototype.get=function(a,b,c){if(this.child_index===bu.mask(b,a))return this.progeny.get(a+5,b,c)},a.prototype.plus=function(b,d,e){var f,g,h;h=bu.mask(d,b);if(this.child_index===h)return new a(h,this.progeny.plus(b+5,d,e));g=1<<this.child_index|1<<h,f=h<this.child_index?[e,this.progeny]:[this.progeny,e];return new c(g,f,this.size+e.size)},a.prototype.minus=function(b,c,d){var e;e=this.progeny.minus(b+5,c,d);return(e!=null?e.progeny:void 0)!=null?new a(this.child_index,e):e},a.prototype.toString=function(a){a==null&&(a="");return"."+this.progeny.toString(a+" ")};return a}(),a=function(){function a(a,b,c,d){this.size=d,this.progeny=bu.arrayWith(a,b,c),this.elements=bn.flatMap(this.progeny,function(a){return a!=null?a.elements:void 0})}a.prototype.get=function(a,b,c){var d;d=bu.mask(b,a);if(this.progeny[d]!=null)return this.progeny[d].get(a+5,b,c)},a.prototype.plus=function(b,c,d){var e,f,g;e=bu.mask(c,b);if(this.progeny[e]!=null){g=this.progeny[e].plus(b+5,c,d),f=this.size+g.size-this.progeny[e].size;return new a(this.progeny,e,g,f)}return new a(this.progeny,e,d,this.size+1)},a.prototype.minus=function(b,d,e){var f,g,h,i,j,k;h=bu.mask(d,b),j=this.progeny[h].minus(b+5,d,e);if(j!=null)return new a(this.progeny,h,j,this.size-1);k=function(){var a,b;b=[];for(i=0,a=this.progeny.length;0<=a?i<a:i>a;0<=a?i++:i--)i!==h&&this.progeny[i]&&b.push(i);return b}.call(this);if(k.length<=4){g=bn.reduce(k,0,function(a,b){return a|1<<b}),f=function(){var a,b,c;c=[];for(a=0,b=k.length;a<b;a++)i=k[a],c.push(this.progeny[i]);return c}.call(this);return new c(g,f,this.size-1)}return new a(this.progeny,h,null,this.size-1)},a.prototype.toString=function(a){var b,c,d;a==null&&(a=""),c=a+" ",b=function(){var a,b,e,f;e=this.progeny,f=[];for(a=0,b=e.length;a<b;a++)d=e[a],d!=null&&f.push(d.toString(c));return f}.call(this);if(b.length===1)return"["+b[0]+"]";b.unshift("");return"["+b.join("\n"+c)+"]"};return a}(),e=function(){function a(a){var b,c;this.root=a,(b=this.root)!=null?b:this.root=j,this.entries=(c=this.root)!=null?c.elements:void 0}a.prototype.size=function(){return this.root.size},a.prototype.each=function(a){var b;return a!=null?(b=this.entries)!=null?b.each(a):void 0:this},a.prototype.update_=function(a){return a!==this.root?new this.constructor(a):this},a.prototype.plus=function(){return this.plusAll(arguments)},a.prototype.plusAll=function(a){return this.update_(bn.reduce(a,this.root,this.constructor.plusOne))},a.prototype.minus=function(){return this.minusAll(arguments)},a.prototype.minusAll=function(a){return this.update_(bn.reduce(a,this.root,this.constructor.minusOne))},a.prototype.map=function(a){return(new this.constructor).plusAll(bn.map(this.entries,a))},a.prototype.toSeq=function(){return this.entries},a.prototype.toArray=function(){return bn.into(this.entries,[])},a.prototype.toString=function(){return""+this.constructor.name+"("+this.root+")"};return a}(),q=function(){function a(a){this.key=a,this.elements=bn.conj(this.key)}a.prototype.size=1,a.prototype.get=function(a,b,c){return b===this.key},a.prototype.plus=function(a,b,d){return(new c).plus(a,this.key,this).plus(a,b,d)},a.prototype.minus=function(a,b,c){return null},a.prototype.toString=function(){return""+this.key};return a}(),t=function(){function a(){a.__super__.constructor.apply(this,arguments)}bR(a,e),a.name="IntSet",a.prototype.contains=function(a){return this.root.get(0,a)===!0},a.plusOne=function(a,b){return bu.isKey(b)&&!a.get(0,b)?a.plus(0,b,new q(b)):a},a.minusOne=function(a,b){return bu.isKey(b)&&(a!=null?a.get(0,b):void 0)?a.minus(0,b):a};return a}(),r=function(){function a(a,b){this.key=a,this.value=b,this.elements=bn.conj([this.key,this.value])}a.prototype.size=1,a.prototype.get=function(a,b,c){if(b===this.key)return this.value},a.prototype.plus=function(a,b,d){return this.key===b?d:(new c).plus(a,this.key,this).plus(a,b,d)},a.prototype.minus=function(a,b,c){return null},a.prototype.toString=function(){return""+this.key+" ~> "+this.value};return a}(),s=function(){function a(){a.__super__.constructor.apply(this,arguments)}bR(a,e),a.name="IntMap",a.prototype.get=function(a){return this.root.get(0,a)},a.plusOne=function(a,b){var c,d;c=b[0],d=b[1];return bu.isKey(c)&&a.get(0,c)!==d?a.plus(0,c,new r(c,d)):a},a.minusOne=function(a,b){return bu.isKey(b)&&typeof (a!=null?a.get(0,b):void 0)!="undefined"?a.minus(0,b):a};return a}(),f=function(){function a(a,b){this.hash=a,this.bucket=b,this.bucket==null&&(this.bucket=[]),this.size=this.bucket.length,this.elements=bn.flatMap(this.bucket,function(a){return a!=null?a.elements:void 0})}a.prototype.get=function(a,b,c){var d;d=bn.find(this.bucket,function(a){return _(a.key,c)});if(d!=null)return d.get(a,b,c)},a.prototype.plus=function(b,d,e){var f;if(d!==this.hash)return(new c).plus(b,this.hash,this).plus(b,d,e);f=this.bucketWithout(e.key),f.push(e);return new a(d,f)},a.prototype.minus=function(b,c,d){switch(this.bucket.length){case 0:case 1:return null;case 2:return bn.find(this.bucket,function(a){return!_(a.key,d)});default:return new a(c,this.bucketWithout(d))}},a.prototype.toString=function(){return""+this.bucket.join("|")},a.prototype.bucketWithout=function(a){var b,c,d,e,f;e=this.bucket,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],_(b.key,a)||f.push(b);return f};return a}(),m=function(){function a(a,b){this.hash=a,this.key=b,this.elements=bn.conj(this.key)}a.prototype.size=1,a.prototype.get=function(a,b,c){if(_(c,this.key))return!0},a.prototype.plus=function(a,b,d){var e;b===this.hash?e=new f(b):e=new c;return e.plus(a,this.hash,this).plus(a,b,d)},a.prototype.minus=function(a,b,c){return null},a.prototype.toString=function(){return""+this.key};return a}(),p=function(){function a(){a.__super__.constructor.apply(this,arguments)}bR(a,e),a.name="HashSet",a.prototype.contains=function(a){return this.root.get(0,bc(a),a)===!0},a.plusOne=function(a,b){var c;c=bc(b);return a.get(0,c,b)?a:a.plus(0,c,new m(c,b))},a.minusOne=function(a,b){var c;c=bc(b);return(a!=null?a.get(0,c,b):void 0)?a.minus(0,c,b):a};return a}(),n=function(){function a(a,b,c){this.hash=a,this.key=b,this.value=c,this.elements=bn.conj([this.key,this.value])}a.prototype.size=1,a.prototype.get=function(a,b,c){if(_(c,this.key))return this.value},a.prototype.plus=function(a,b,d){var e;if(_(this.key,d.key))return d;b===this.hash?e=new f(b):e=new c;return e.plus(a,this.hash,this).plus(a,b,d)},a.prototype.minus=function(a,b,c){return null},a.prototype.toString=function(){return""+this.key+" ~> "+this.value};return a}(),o=function(){function a(){a.__super__.constructor.apply(this,arguments)}bR(a,e),a.name="HashMap",a.prototype.get=function(a){return this.root.get(0,bc(a),a)},a.plusOne=function(a,b){var c,d,e;d=b[0],e=b[1],c=bc(d);return a.get(0,c,d)===e?a:a.plus(0,c,new n(c,d,e))},a.minusOne=function(a,b){var c;c=bc(b);return typeof (a!=null?a.get(0,c,b):void 0)!="undefined"?a.minus(0,c,b):a};return a}(),typeof exports!="undefined"&&exports!==null?exports:exports=(bL=this.pazy)!=null?bL:this.pazy={},exports.IntSet=t,exports.IntMap=s,exports.HashMap=o,exports.HashSet=p,typeof require!="undefined"?(require.paths.unshift(__dirname),bn=require("sequence").seq,p=require("indexed").HashSet):(bM=this.pazy,bn=bM.seq,p=bM.HashSet),bn.method("uniq",function(a,b){var c;b==null&&(b=new p);if(a){c=a.first();return b.contains(c)?this.uniq__(a.rest(),b):bn.conj(c,bO(function(){return this.uniq__(a.rest(),b.plus(c))},this))}return null}),typeof require!="undefined"?(require.paths.unshift("#{__dirname}/../lib"),bn=require("sequence").seq,bN=require("functional"),O=bN.bounce,bt=bN.suspend):(bn=pazy.seq,O=pazy.bounce,bt=pazy.suspend),H=function(){function a(){}return a}(),i=function(){function a(){}a.prototype.after=function(a){return a===void 0?this:new this.constructor(this.data.after(a))},a.prototype.before=function(a){return a===void 0?this:new this.constructor(this.data.before(a))},a.prototype.concat=function(a){return a==null?this:new this.constructor(this.data.concat(a.data))},a.prototype.reverse=function(){return new this.constructor(this.data.reverse())},a.prototype.plus=a.prototype.before;return a}(),k=function(){function a(a,b){var c,d,e,f,g,h,j,k,l,m,n,o,p,q,r;b==null&&(b=i),this.build=function(){return bn.reduce(arguments,n,function(a,b){return a.plus(b)})},r=function(b){var c;return b===h||(c=b.constructor,bS.call(o,c)>=0)?b.measure():a.single(b)},p=function(){return bn.reduce(arguments,a.empty,function(b,c){return c!=null?a.sum(b,r(c)):b})},q=function(a){var b;return(b=a!=null?a.constructor:void 0)===k||b===l?a.reverse():a},j=function(){function c(a){this.data=a}bR(c,b),c.prototype.empty=function(){return n},c.prototype.isEmpty=function(){return this.data.isEmpty()},c.prototype.reduceLeft=function(a,b){return this.data.reduceLeft(a,b)},c.prototype.reduceRight=function(a,b){return this.data.reduceRight(a,b)},c.prototype.first=function(){return this.data.first()},c.prototype.last=function(){return this.data.last()},c.prototype.rest=function(){return new c(this.data.rest())},c.prototype.init=function(){return new c(this.data.init())},c.prototype.measure=function(){return this.data.measure()},c.prototype.split=function(b){var d,e,f,g;if(this.data!==h&&b(p(this.data))){g=this.data.split(b,a.empty),d=g[0],f=g[1],e=g[2];return[new c(d),f,new c(e)]}return[this,void 0,new c(h)]},c.prototype.takeUntil=function(a){return this.split(a)[0]},c.prototype.dropUntil=function(a){var b,d,e,f;f=this.split(a),b=f[0],e=f[1],d=f[2];return e===void 0?d:new c(d.data.after(e))},c.prototype.find=function(a){return this.split(a)[1]},c.prototype.toSeq=function(){return this.data.reduceRight(function(a,b){return bn.conj(a,function(){return b})},null)},c.prototype.toString=function(){return this.data.reduceLeft("",function(a,b){return a+" "+b})};return c}(),k=function(){function a(a,b){this.a=a,this.b=b,this.v=p(this.a,this.b)}a.prototype.reduceLeft=function(a,b){return b(b(a,this.a),this.b)},a.prototype.reduceRight=function(a,b){return a(this.a,a(this.b,b))},a.prototype.asDigit=function(){return new e(this.a,this.b)},a.prototype.measure=function(){return this.v},a.prototype.reverse=function(){return new a(q(this.b),q(this.a))};return a}(),l=function(){function a(a,b,c){this.a=a,this.b=b,this.c=c,this.v=p(this.a,this.b,this.c)}a.prototype.reduceLeft=function(a,b){return b(b(b(a,this.a),this.b),this.c)},a.prototype.reduceRight=function(a,b){return a(this.a,a(this.b,a(this.c,b)))},a.prototype.asDigit=function(){return new f(this.a,this.b,this.c)},a.prototype.measure=function(){return this.v},a.prototype.reverse=function(){return new a(q(this.c),q(this.b),q(this.a))};return a}(),d=function(){function a(a){this.a=a}a.prototype.reduceLeft=function(a,b){return b(a,this.a)},a.prototype.reduceRight=function(a,b){return a(this.a,b)},a.prototype.after=function(a){return new e(a,this.a)},a.prototype.before=function(a){return new e(this.a,a)},a.prototype.first=function(){return this.a},a.prototype.last=function(){return this.a},a.prototype.rest=function(){return h},a.prototype.init=function(){return h},a.prototype.measure=function(){return p(this.a)},a.prototype.split=function(a,b){return[h,this.a,h]},a.prototype.reverse=function(){return new a(q(this.a))};return a}(),e=function(){function b(a,b){this.a=a,this.b=b}b.prototype.reduceLeft=function(a,b){return b(b(a,this.a),this.b)},b.prototype.reduceRight=function(a,b){return a(this.a,a(this.b,b))},b.prototype.after=function(a){return new f(a,this.a,this.b)},b.prototype.before=function(a){return new f(this.a,this.b,a)},b.prototype.first=function(){return this.a},b.prototype.last=function(){return this.b},b.prototype.rest=function(){return new d(this.b)},b.prototype.init=function(){return new d(this.a)},b.prototype.asNode=function(){return new k(this.a,this.b)},b.prototype.measure=function(){return p(this.a,this.b)},b.prototype.split=function(b,c){return b(a.sum(c,p(this.a)))?[h,this.a,new d(this.b)]:[new d(this.a),this.b,h]},b.prototype.reverse=function(){return new b(q(this.b),q(this.a))};return b}(),f=function(){function b(a,b,c){this.a=a,this.b=b,this.c=c}b.prototype.reduceLeft=function(a,b){return b(b(b(a,this.a),this.b),this.c)},b.prototype.reduceRight=function(a,b){return a(this.a,a(this.b,a(this.c,b)))},b.prototype.after=function(a){return new g(a,this.a,this.b,this.c)},b.prototype.before=function(a){return new g(this.a,this.b,this.c,a)},b.prototype.first=function(){return this.a},b.prototype.last=function(){return this.c},b.prototype.rest=function(){return new e(this.b,this.c)},b.prototype.init=function(){return new e(this.a,this.b)},b.prototype.asNode=function(){return new l(this.a,this.b,this.c)},b.prototype.measure=function(){return p(this.a,this.b,this.c)},b.prototype.split=function(b,c){var f;f=a.sum(c,p(this.a));return b(f)?[h,this.a,new e(this.b,this.c)]:b(a.sum(f,p(this.b)))?[new d(this.a),this.b,new d(this.c)]:[new e(this.a,this.b),this.c,h]},b.prototype.reverse=function(){return new b(q(this.c),q(this.b),q(this.a))};return b}(),g=function(){function b(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d}b.prototype.reduceLeft=function(a,b){return b(b(b(b(a,this.a),this.b),this.c),this.d)},b.prototype.reduceRight=function(a,b){return a(this.a,a(this.b,a(this.c,a(this.d,b))))},b.prototype.first=function(){return this.a},b.prototype.last=function(){return this.d},b.prototype.rest=function(){return new f(this.b,this.c,this.d)},b.prototype.init=function(){return new f(this.a,this.b,this.c)},b.prototype.measure=function(){return p(this.a,this.b,this.c,this.d)},b.prototype.split=function(b,c){var g,i;g=a.sum(c,p(this.a));if(b(g))return[h,this.a,new f(this.b,this.c,this.d)];i=a.sum(g,p(this.b));return b(i)?[new d(this.a),this.b,new e(this.c,this.d)]:b(a.sum(i,p(this.c)))?[new e(this.a,this.b),this.c,new d(this.d)]:[new f(this.a,this.b,this.c),this.d,h]},b.prototype.reverse=function(){return new b(q(this.d),q(this.c),q(this.b),q(this.a))};return b}(),h={isEmpty:function(){return!0},reduceLeft:function(a,b){return a},reduceRight:function(a,b){return b},after:function(a){return new m(a)},before:function(a){return new m(a)},first:function(){},last:function(){},rest:function(){},init:function(){},concat:function(a){return a},measure:function(){return p()},reverse:function(){return this}},n=new j(h),m=function(){function a(a){this.a=a}a.prototype.isEmpty=function(){return!1},a.prototype.reduceLeft=function(a,b){return b(a,this.a)},a.prototype.reduceRight=function(a,b){return a(this.a,b)},a.prototype.after=function(a){return new c(new d(a),function(){return h},new d(this.a))},a.prototype.before=function(a){return new c(new d(this.a),function(){return h},new d(a))},a.prototype.first=function(){return this.a},a.prototype.last=function(){return this.a},a.prototype.rest=function(){return h},a.prototype.init=function(){return h},a.prototype.concat=function(a){return a.after(this.a)},a.prototype.measure=function(){return p(this.a)},a.prototype.split=function(a,b){return[h,this.a,h]},a.prototype.reverse=function(){return this};return a}(),c=function(){function q(a,b,c){this.l=a,this.m=b,this.r=c}var b,c,d,f,i,j,n,o;n=function(a){return function(b,c){return c.reduceLeft(b,a)}},o=function(a){return function(b,c){return b.reduceRight(a,c)}},d=function(a){return a.reduceLeft(h,function(a,b){return a.before(b)})},c=function(a){return a.reduceRight(function(a,b){return bn.conj(a,function(){return b})},null)},q.prototype.isEmpty=function(){return!1},q.prototype.measure=function(){var a;a=p(this.l,this.m(),this.r);return(this.measure=function(){return a})()},q.prototype.reduceLeft=function(a,b){var c,d;c=n(b),d=n(c);return c(d(c(a,this.l),this.m()),this.r)},q.prototype.reduceRight=function(a,b){var c,d;c=o(a),d=o(c);return c(this.l,d(this.m(),c(this.r,b)))},q.prototype.after=function(a){var b,c,d,f,h,i;if(this.l.constructor===g){i=this.l,b=i.a,c=i.b,d=i.c,f=i.d,h=new e(a,b);return new q(h,bt(bO(function(){return this.m().after(new l(c,d,f))},this)),this.r)}return new q(this.l.after(a),this.m,this.r)},q.prototype.before=function(a){var b,c,d,f,h,i;if(this.r.constructor===g){i=this.r,b=i.a,c=i.b,d=i.c,f=i.d,h=new e(f,a);return new q(this.l,bt(bO(function(){return this.m().before(new l(b,c,d))},this)),h)}return new q(this.l,this.m,this.r.before(a))},q.prototype.first=function(){return this.l.first()},q.prototype.last=function(){return this.r.last()},f=function(a,b,c){return a===h?b()===h?d(c):new q(b().first().asDigit(),bt(bO(function(){return b().rest()},this)),c):new q(a,b,c)},i=function(a,b,c){return c===h?b()===h?d(a):new q(a,bt(bO(function(){return b().init()},this)),b().last().asDigit()):new q(a,b,c)},q.prototype.rest=function(){return f(this.l.rest(),bt(bO(function(){return this.m()},this)),this.r)},q.prototype.init=function(){return i(this.l,bt(bO(function(){return this.m()},this)),this.r.init())},j=function(a,b){if(a===0)return null;if(a===1||a<0)throw new Error("this should not happen");return a===2||a%3===1?bn.conj(function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return typeof e=="object"?e:d}(k,b.take(2).into([]),function(){}),function(){return j(a-2,b.drop(2))}):bn.conj(function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return typeof e=="object"?e:d}(l,b.take(3).into([]),function(){}),function(){return j(a-3,b.drop(3))})},b=function(a,d,e){var f;if(a===h)return bn.reduce(bn.reverse(d),e,function(a,b){return a.after(b)});if(e===h)return bn.reduce(d,a,function(a,b){return a.before(b)});if(a.constructor===m)return b(h,d,e).after(a.a);if(e.constructor===m)return b(a,d,h).before(e.a);f=bn.flatten([c(a.r),d,c(e.l)]),bl=j(f.size(),f);return new q(a.l,bt(function(){return b(a.m(),bl,e.m())}),e.r)},q.prototype.concat=function(a){return b(this,null,a)},q.prototype.split=function(b,c){var e,g,h,j,k,l,m,n,o,q,r,s;e=a.sum(c,p(this.l));if(b(e)){o=this.l.split(b,c),h=o[0],m=o[1],l=o[2];return[d(h),m,f(l,bt(bO(function(){return this.m()},this)),this.r)]}g=a.sum(e,p(this.m()));if(b(g)){q=this.m().split(b,e),j=q[0],n=q[1],k=q[2],r=n.asDigit().split(b,a.sum(e,p(j))),h=r[0],m=r[1],l=r[2];return[i(this.l,function(){return j},h),m,f(l,function(){return k},this.r)]}s=this.r.split(b,g),h=s[0],m=s[1],l=s[2];return[i(this.l,bt(bO(function(){return this.m()},this)),h),m,d(l)]},q.prototype.reverse=function(){return new q(this.r.reverse(),bt(bO(function(){return this.m().reverse()},this)),this.l.reverse())};return q}(),o=[k,l,d,e,f,g,m,c]}return a}(),C={empty:0,single:function(a){return 1},sum:function(a,b){return a+b}},g=function(){function a(){a.__super__.constructor.apply(this,arguments)}bR(a,i),a.prototype.size=function(){return this.measure()},a.prototype.get=function(a){return this.find(function(b){return b>a})},a.prototype.splitAt=function(a){var b,c,d,e;e=this.split(function(b){return b>a}),b=e[0],d=e[1],c=e[2];return[b,c.after(d)]};return a}(),h=new k(C,g),w={empty:void 0,single:function(a){return a},sum:function(a,b){return b!=null?b:a}},D=function(a,b){return function(){function h(){h.__super__.constructor.apply(this,arguments)}var c,d,e,f,g;bR(h,b),c=function(a,b){return b===void 0?a:new a.constructor(a.data.after(b))},d=function(a,b){return b===void 0?a:new a.constructor(a.data.before(b))},e=function(a,b){return new a.constructor(a.data.concat(b.data))},h.prototype.partition=function(b){var d,e,f,g;g=this.split(function(c){return!a(c,b)}),d=g[0],f=g[1],e=g[2];return[d,c(e,f)]},h.prototype.insert=function(a){var b,d,f;f=this.partition(a),b=f[0],d=f[1];return e(b,c(d,a))},h.prototype.deleteAll=function(b){var c,d,f;f=this.partition(b),c=f[0],d=f[1];return e(c,d.dropUntil(function(c){return a(b,c)}))},g=function(b,f,h){var i,j,k,l,m;if(h.isEmpty())return e(b,f);i=h.first(),m=f.split(function(b){return a(i,b)}),j=m[0],l=m[1],k=m[2];return function(){var a;a=e(b,d(j,i));return g(a,h.rest(),c(k,l))}},h.prototype.merge=function(a){return O(g(this.empty(),this,a))},f=function(b,e,g){var h,i,j,k,l;if(g.isEmpty())return b;h=g.first(),l=e.split(function(b){return!a(b,h)}),i=l[0],k=l[1],j=l[2];return a(h,k)?function(){return f(b,g.rest(),c(j,k))}:function(){return f(d(b,k),g.rest(),j)}},h.prototype.intersect=function(a){return O(f(this.empty(),this,a))},h.prototype.plus=h.prototype.insert;return h}()},E=function(){function a(b,c){b==null&&(b=function(a,b){return a<b}),c==null&&(c=H),a.__super__.constructor.call(this,w,D(b,c))}bR(a,k);return a}(),typeof exports!="undefined"&&exports!==null?exports:exports=(bw=this.pazy)!=null?bw:this.pazy={},exports.FingerTreeType=k,exports.CountedSeq=h,exports.SortedSeqType=E,exports.SortedSeq=new E,typeof require!="undefined"?(require.paths.unshift(__dirname),O=require("functional").bounce,o=require("indexed").HashMap):(bx=this.pazy,O=bx.bounce,o=bx.HashMap),x=function(){function b(){this.rank=new o,this.parent=new o}var a;a=function(a,c){var d;d=new b,d.rank=a,d.parent=c;return d},b.prototype.find=function(a){var b,c,d;if(this.parent.get(a)==null){this.parent=this.parent.plus([a,a]),this.rank=this.rank.plus([a,0]);return a}d=bO(function(a){var b;b=this.parent.get(a);return b===a?b:function(){return d(b)}},this),c=O(d(a)),b=bO(function(a){var d;d=this.parent.get(a),this.parent=this.parent.plus([a,c]);if(d!==a)return function(){return b(d)}},this),O(b(a));return c},b.prototype.union=function(b,c){var d,e,f,g;e=this.find(b),g=this.find(c);if(e===g)return this;d=this.rank.get(e),f=this.rank.get(g);return d<f?a(this.rank,this.parent.plus([e,g])):d>f?a(this.rank,this.parent.plus([g,e])):a(this.rank.plus([e,d+1]),this.parent.plus([g,e]))};return b}(),typeof exports!="undefined"&&exports!==null?exports:exports=(by=this.pazy)!=null?by:this.pazy={},exports.Partition=x,typeof require!="undefined"?(require.paths.unshift(__dirname),bn=require("sequence").seq):bn=this.pazy.seq,F=function(){function a(a){this.s=a}a.prototype.push=function(b){return new a(bn.conj(b,bO(function(){return this.s},this)))},a.prototype.first=function(){var a;return(a=this.s)!=null?a.first():void 0},a.prototype.rest=function(){var b;return new a((b=this.s)!=null?b.rest():void 0)},a.prototype.toSeq=function(){return this.s};return a}(),typeof exports!="undefined"&&exports!==null?exports:exports=(bz=this.pazy)!=null?bz:this.pazy={},exports.Stack=F,typeof require!="undefined"?(require.paths.unshift(__dirname),bn=require("sequence").seq):bn=this.pazy.seq,z=function(){function b(b,c,d){var e;d?(e=[b,c,d.rest()],this.front=e[0],this.rear=e[1],this.schedule=e[2]):b||c?(this.front=this.schedule=a(b,c,null),this.rear=null):this.front=this.rear=this.schedule=null}var a;a=function(b,c,d){var e;e=bn.conj(c.first(),function(){return d});return b?bn.conj(b.first(),function(){return a(b.rest(),c.rest(),e)}):e},b.prototype.push=function(a){return new b(this.front,bn.conj(a,bO(function(){return this.rear},this)),this.schedule)},b.prototype.first=function(){var a;return(a=this.front)!=null?a.first():void 0},b.prototype.rest=function(){var a;return new b((a=this.front)!=null?a.rest():void 0,this.rear,this.schedule)},b.prototype.toSeq=function(){return bn.concat(this.front,bn.reverse(this.rear))};return b}(),typeof exports!="undefined"&&exports!==null?exports:exports=(bA=this.pazy)!=null?bA:this.pazy={},exports.Queue=z,typeof require!="undefined"?(require.paths.unshift(__dirname),O=require("functional").bounce,bn=require("sequence").seq):(bB=this.pazy,O=bB.bounce,bn=bB.seq),bj=typeof module!="undefined"&&module!==null&&!module.parent,bk=function(a){return""+(a?a.into([]).join("|"):"[]")},Z=function(a){return bk(a!=null?a.reverse():void 0)},bj?(bC=[1e4,100],b=bC[0],l=bC[1],bd=function(a){return console.log(a)}):(bd=function(a){},bD=bn.from(1).map(function(a){return[Math.pow(10,2*a),Math.pow(10,a)]}).takeWhile(function(a){var b,c;b=a[0],c=a[1];return 2*b-2!==2*b-1}).last(),b=bD[0],l=bD[1]),I=bn.conj(0),v=bn.conj(1),G=bn.conj(2),S=function(a){var b,c;return(a!=null?(b=a.reverse())!=null?(c=b.dropWhile(function(a){return a===0}))!=null?c.reverse():void 0:void 0:void 0)||null},T=function(a,b){var c,d,e;return((c=bn.sub(a,b))!=null?(d=c.reverse())!=null?(e=d.dropWhile(function(a){return a===0}))!=null?e.first():void 0:void 0:void 0)||0},M=function(a,c,d){var e,f,g,h,i,j,k;d==null&&(d=0);if(d||a&&c){j=[a||I,c||I],g=j[0],h=j[1],i=g.first()+h.first()+d,k=i>=b?[i-b,1]:[i,0],f=k[0],e=k[1];return bn.conj(f,function(){return M(g.rest(),h.rest(),e)})}return c||a},bs=function(a,c){var d;d=function(a,c,e){var f,g,h,i,j,k,l;e==null&&(e=0);if(e||a&&c){k=[a||I,c||I],h=k[0],i=k[1],j=h.first()-i.first()-e,l=j<0?[j+b,1]:[j,0],g=l[0],f=l[1];return bn.conj(g,function(){return d(h.rest(),i.rest(),f)})}return c||a};return S(d(a,c))},bq=function(a){return[a%l,Math.floor(a/l)]},W=function(a,c){var d,e,f,g,h,i,j,k,m,n,o,p,q;if(c<b/a)return[a*c,0];n=bq(a),d=n[0],e=n[1],o=bq(c),f=o[0],g=o[1],p=bq(d*g+f*e),j=p[0],k=p[1],m=d*f+j*l,q=m<b?[m,0]:[m-b,1],i=q[0],h=q[1];return[i,e*g+k+h]},bo=function(a,b,c){var d,e,f,g;c==null&&(c=0);if(c||a){f=a||I,g=W(b,f.first()),e=g[0],d=g[1];return bn.conj(e+c,function(){return bo(f.rest(),b,d)})}},bh=function(a,b){var c;c=function(a,b,d){var e;if(b){e=M(a,bo(d,b.first()))||I;return bn.conj(e.first(),function(){return c(e.rest(),b.rest(),d)})}return a};return c(null,a,b)},Y=function(a,c){var d,e,f,g,h,i,j,k,l;h=Math.floor(b/(c.last()+1)),k=function(){var b,d,e,f;e=[a,c],f=[];for(b=0,d=e.length;b<d;b++)j=e[b],f.push(bn(bo(j,h)));return f}(),f=k[0],g=k[1],l=[g.size(),g.last()+1],e=l[0],d=l[1],i=function(a,c,f){var j,k;j=(c!=null?c.size():void 0)<e?0:(k=(c!=null?c.last():void 0)*((c!=null?c.size():void 0)>e?b:1)||0,Math.floor(k/d)||(T(c,g)>=0?1:0));return j?function(){return i(M(a,bn.conj(j)),bs(c,bo(g,j)),f)}:f?function(){return i(bn.conj(0,function(){return a}),bn.conj(f.first(),function(){return c}),f.rest())}:[S(a),c&&X(c,bn.conj(h))]};return O(i(null,null,f.reverse()))},X=function(a,b){return Y(a,b)[0]},bg=function(a,b){return Y(a,b)[1]},bi=function(a,b){var c;c=function(a,b,d){return d?d.first()%2===1?function(){return c(bh(a,b),b,bs(d,v))}:function(){return c(a,bn(bh(b,b)),X(d,G))}:a};return O(c(v,a,b))},br=function(a){var b,c;b=a.size();if(b===1)return bn.conj(Math.floor(Math.sqrt(a.first())));c=function(b){var d;d=bn(X(M(b,X(a,b)),G));return T(b,d)?function(){return c(d)}:d};return O(c(a.take(b>>1)))},u=function(){function c(a){var c,d,e;a==null&&(a=0),d=function(a){if(a)return bn.conj(a%b,function(){return d(Math.floor(a/b))})},e=a<0?[-a,-1]:[a,1],c=e[0],this.sign__=e[1],this.digits__=S(bn(d(c)))}var a;c.base=function(){return b},a=function(a,b){var d;d=new c,d.digits__=S(bn(a)),d.sign__=d.digits__!=null?b:1;return d},c.make=function(a){if(a instanceof c)return a;if(a instanceof d)return new c(a.val);if(typeof a=="number")return new c(a);throw new Error(""+a+" is not a number")},c.prototype.toString=function(){var a,c,d,e,f,g;d=b.toString().slice(1),c=(e=this.digits__)!=null?(f=e.reverse())!=null?f.dropWhile(function(a){return a===0}):void 0:void 0,a=[c!=null?c.first().toString():void 0],c!=null&&(g=c.rest())!=null&&g.each(function(b){var c;c=b.toString();return a.push(""+d.slice(c.length)+c)}),c?this.sign()<0&&a.unshift("-"):a.push("0");return a.join("")},c.prototype.toNumber=function(){var a,c,d,e;c=function(a,d){return d?function(){return c(a*b+d.first(),d.rest())}:a},a=(d=this.digits__)!=null?(e=d.reverse())!=null?e.dropWhile(function(a){return a===0}):void 0:void 0;return this.sign()*O(c(0,a))},c.operator=function(a,b,d){var e,f,g,h;e=function(){var a,e;a=1<=arguments.length?bP.call(arguments,0):[];return d.apply(this,function(){var d,f,g,h;g=a.slice(0,b-1),h=[];for(d=0,f=g.length;d<f;d++)e=g[d],h.push(c.make(e));return h}())};for(g=0,h=a.length;g<h;g++)f=a[g],this.prototype[f]=e;return null},c.operator(["neg","-"],1,function(){return a(this.digits__,-this.sign())}),c.operator(["abs"],1,function(){return a(this.digits__,1)}),c.operator(["sign"],1,function(){return this.sign__}),c.operator(["cmp","<=>"],2,function(a){return this.sign()!==a.sign()?this.sign():this.sign()*T(this.digits__,a.digits__)}),c.operator(["plus","+"],2,function(b){return this.sign()!==b.sign()?this.minus(b.neg()):a(M(this.digits__,b.digits__),this.sign())}),c.operator(["minus","-"],2,function(b){return this.sign()!==b.sign()?this.plus(b.neg()):this.abs().cmp(b.abs())<0?a(bs(b.digits__,this.digits__),-this.sign()):a(bs(this.digits__,b.digits__),this.sign())}),c.operator(["times","*"],2,function(b){return a(bh(this.digits__,b.digits__),this.sign()*b.sign())}),c.operator(["div","/"],2,function(b){var d;d=this.abs().cmp(b.abs());return d<0?new c(0):d===0?new c(this.sign()*b.sign()):a(X(this.digits__,b.digits__),this.sign()*b.sign())}),c.operator(["mod","%"],2,function(b){var d;d=this.abs().cmp(b.abs());return d<0?this:d===0?new c(0):a(bg(this.digits__,b.digits__),this.sign()*b.sign())}),c.operator(["pow","**"],2,function(b){if(b.sign()>0)return a(bi(this.digits__,b.digits__),this.sign());throw new Error("exponent must not be negative")}),c.operator(["sqrt"],1,function(){if(this.sign()>0)return a(br(this.digits__));throw new Error("number must not be negative")}),c.operator(["gcd"],2,function(a){var b,c,d,e;d=function(a,b){return b.cmp(0)>0?function(){return d(b,a.mod(b))}:a},e=[this.abs(),a.abs()],b=e[0],c=e[1];return b.cmp(c)>0?O(d(b,c)):O(d(c,b))});return c}(),d=function(){function c(a){a==null&&(a=0);if(typeof a!="number")throw new Error(""+a+" is not a number");if(a%1)throw new Error(""+a+" is not an integer");if(Math.abs(a)>=b)throw new Error(""+a+" is not between "+(-b+1)+" and "+(b-1));this.val=a}var a;c.make=function(a){return a instanceof c?a:new c(a)},a=function(a){return Math.abs(a)<b?new c(a):new u(a)},c.operator=function(a,b,d){var e,f,g,h;e=function(){var a,e;a=1<=arguments.length?bP.call(arguments,0):[];return d.apply(this,function(){var d,f,g,h;g=a.slice(0,b-1),h=[];for(d=0,f=g.length;d<f;d++)e=g[d],h.push(c.make(e));return h}())};for(g=0,h=a.length;g<h;g++)f=a[g],this.prototype[f]=e;return null},c.operator(["neg","-"],1,function(){return new c(-this.val)}),c.operator(["abs"],1,function(){return new c(Math.abs(this.val))}),c.operator(["cmp","<=>"],2,function(a){return this.val<a.val?-1:this.val>a.val?1:0}),c.operator(["sgn"],1,function(){return this.cmp(0)}),c.operator(["plus","+"],2,function(b){return a(this.val+b.val)}),c.operator(["minus","-"],2,function(b){return a(this.val-b.val)}),c.operator(["times","*"],2,function(a){var d;d=this.val*a.val;return Math.abs(d)<b?new c(d):(new u(this.val)).times(a.val)}),c.operator(["div","/"],2,function(b){return a(this.val/b.val>>0)}),c.operator(["mod","%"],2,function(b){return a(this.val%b.val)}),c.operator(["pow","**"],2,function(a){var d;switch(a.sgn()){case 0:return 1;case-1:throw Error("exponent must not be negative");default:d=Math.pow(this.val,a.val);return Math.abs(d)<b?new c(d):(new u(this.val)).pow(a.val)}}),c.operator(["sqrt"],1,function(){return Math.sqrt(this.val)>>0}),c.operator(["gcd"],2,function(a){var b,d,e,f,g;e=function(a,b){return b>0?function(){return e(b,a%b)}:a},g=[Math.abs(this.val),Math.abs(a.val)],b=g[0],d=g[1],f=b>d?O(e(b,d)):O(e(d,b));return new c(f)}),c.prototype.toString=function(){return""+this.val};return c}(),typeof exports!="undefined"&&exports!==null?exports:exports=(bE=this.pazy)!=null?bE:this.pazy={},exports.LongInt=u,bj&&(J=new d(9950),bd("a = "+J),K=J["*"](J),bd("a * a = "+K),L=K["*"](J),bd("("+J+"**3 + 1) / "+J+"**2 = "+L.plus(1).div(K)+" ("+L.plus(1).mod(K)+")"),bd(""),bd("("+J+"**3 - 1) / "+J+"**2 = "+L.minus(1).div(K)+" ("+L.minus(1).mod(K)+")"),bd(""),N=new u(111111112),bd(""+N+" / 37 = "+N.div(37)+" ("+N.mod(37)+")"),bd(""),P=new u(120661737472),V=new u(100280245065),bd(""+P+" gcd "+V+" = "+P.gcd(V)+" (expected "+899+")"),bd(""),$=(new d(5)).pow(5),bd("5**5 = "+$),bd("class of 5**5 is "+$.constructor.name),ba=(new d(5)).pow(6),bd("5**6 = "+ba),bd("class of 5**6 is "+ba.constructor.name)),typeof require!="undefined"?(require.paths.unshift(__dirname),u=require("long_int").LongInt):u=this.pazy.LongInt,A=function(){function b(a,b,c){var d,e,f,g;a==null&&(a=0),b==null&&(b=1),c==null&&(c=!1),e=u.make(b).cmp(0);if(e===0)throw new Error("denominator is zero");e<0?(f=[u.make(a).neg(),u.make(b).neg()],d=f[0],V=f[1]):(g=[u.make(a),u.make(b)],d=g[0],V=g[1]),c?(this.num__=d,this.den__=V):(J=d.gcd(V),this.num__=d.div(J),this.den__=V.div(J))}var a;b.prototype.numerator=function(){return this.num__},b.prototype.denominator=function(){return this.den__},a=function(a){if(a instanceof b)return a;if(a instanceof u)return new b(a);if(typeof a=="number")return new b(a);throw new Error(""+a+" is not a number")},b.prototype.toString=function(){return this.den__.cmp(1)===0?this.num__.toString():""+this.num__.toString()+"/"+this.den__.toString()},b.operator=function(b,c,d){var e,f,g;ba=function(){var b,e;b=1<=arguments.length?bP.call(arguments,0):[];return d.apply(this,function(){var d,f,g,h;g=b.slice(0,c-1),h=[];for(d=0,f=g.length;d<f;d++)e=g[d],h.push(a(e));return h}())};for(f=0,g=b.length;f<g;f++)e=b[f],this.prototype[e]=ba;return null},b.operator(["neg","-"],1,function(){return new b(this.num__.neg(),this.den__,!0)}),b.operator(["inv"],1,function(){return new b(this.den__,this.num__,!0)}),b.operator(["abs"],1,function(){return new b(this.num__.abs(),this.den__,!0)}),b.operator(["sign"],1,function(){return this.num__.sign()}),b.operator(["plus","+"],2,function(a){var c,d;J=this.den__.gcd(a.den__),d=this.den__.div(J),c=a.den__.div(J).times(this.num__).plus(d.times(a.num__));return new b(c,d.times(a.den__))}),b.operator(["minus","-"],2,function(a){return this.plus(a.neg())}),b.operator(["cmp","<=>"],2,function(a){return this.minus(a).num__.cmp(0)}),b.operator(["times","*"],2,function(a){var c;J=this.num__.gcd(a.den__),N=this.den__.gcd(a.num__),c=this.num__.div(J).times(a.num__.div(N)),V=this.den__.div(N).times(a.den__.div(J));return new b(c,V,!0)}),b.operator(["div","/"],2,function(a){return this.times(a.inv())}),b.operator(["pow","**"],2,function(a){if(a.den__.cmp(1)!==0)throw new Error("exponent must be an integer");return new b(this.num__.pow(a.num__),this.den__.pow(a.num__))});return b}(),typeof exports!="undefined"&&exports!==null?exports:exports=(bF=this.pazy)!=null?bF:this.pazy={},exports.Rational=A}).call(this)